<script type="text/x-red" data-template-name="directmethod">
	<div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-connectionString"><i class="fa fa-bookmark"></i> connectionString</label>
        <input type="text" id="node-input-connectionString">
	</div>
	<div class="form-row">
        <label for="node-input-deviceId"><i class="icon-tag"></i> <span>Device ID</span></label>
        <input type="text" id="node-input-deviceId" placeholder="%deviceId%">
	</div>
    <div class="form-row">
        <label for="node-input-method"><i class="icon-tag"></i> <span>Method</span></label>
        <input type="text" id="node-input-method" placeholder="Method">
    </div>
</script>

<script type="text/x-red" data-help-name="directmethod">
	<p>A simple node for send cloud-to-device message on Azure IoT hub.</p

	<h3>Input</h3>
	<dl class="message-properties">
		<dt>payload	</dt>
		<dd> the payload of the message to send </dd>
		<dt class="optional">deviceId</dt>
		<dd> the deviceId to send message to. If not set, the deviceId will be extracted from <code>msg.deviceId</code></dd>
	</dl>

	<h3>Output</h3>
	The node sends as output the send state.  <code>msg.error</code> is valiorized in case of error, otherwise <code>payload.result</code> contain the successfully send result.
	<code>payload.source</code> contain the sent payload
</script>

<script type="text/javascript">
	RED.nodes.registerType('directmethod', {
		category: "Azure IoT",
		color: "#00abec",
		defaults: {
			deviceId: { value: "", required: true },
            method: {value:"", required:true },
			name: { value: "Direct Method" }
		},
		inputs: 1,
		outputs: 1,
		icon: "azureiothub.png",
		label: function () {
            return "Direct Method: "+this.method;
		},
		paletteLabel: function () {
			return "Direct Method";
		},
		credentials: {
			connectionString: { type: "text" }
		}
	});
</script>